---
title: 공간 데이터 베이스 - 데이터 모델
author: blakewoo
date: 2025-9-5 21:30:00 +0900
categories: [Database]
tags: [Computer science, Database, Spacial Database]
render_with_liquid: false
---

# 공간 데이터 베이스 - 데이터 모델
## 1. 개요
모델이라고 하면 원래 건물을 지을때의 청사진이나 일종의 미니어처를 말한다. 하지만 여기서 앞에 데이터가 붙는다면
뜻은 좀 달라진다. 어떤 데이터 모음에 대한 구조나 형태를 말한다. 이 형태는 실질적으로 이 데이터가 어떤 역할을 하는지
설명에 대한 것도 붙는다. 전통적인 SQL DB에서 Column 이름을 설명에 가깝게 짓는것도 해당 이유때문이라고 할 수 있겠다.

이러한 데이터 모델을 잘 설계하는것은 매우 중요한데, 데이터 모델이 정립되어있다면 저장용량을 얼마나 사용할지 예측하기 쉽고
Query 성능에 대한 튜닝 및 측정이 매우 쉬워진다. 또한 다수의 응용에서 특정 공유 데이터를 재사용하기에 좋아지며
데이터 교환에 대한 편의성 역시 올라간다. 
그렇다면 데이터 모델을 제대로 설계하지 못할 경우에는 반대의 경우가 일어나는 것인데, 간단한 예시로 Y2K 사태가 있다.   
1999년에서 2000년도로 넘어가는 시점에서 표현이 저장 장치 및 여러 효율을 위해 99년도 같이 뒤에 2자리만 사용해서
정보를 다루고 있었는데, 이러한 시스템은 1960대에 설계되었었다. 그 당시에는 2000년 전까진 어떻게든 시스템을 바꾸겠지라는
생각때문에 안일하다면 안일한 생각으로 그렇게 설계한 것인데, 시스템이라는게 한번 구축되면 굉장히 보수적으로 운용하게 되기에
2000년 직전까지 그대로 사용하게 되었다.   
그 당시만 하더라도 추상데이터 타입을 정의해두고 짰던게 아니라서 수정하는데 굉장히 큰 어려움을 겪었고 이는 그대로 비용문제가되어
많은 비용이 들었다.

> 다시 Y2K 같은 사태가 일어나지는 않을까?   
일어난다. 이미 예정된 시기가 있다. Y2K38이라는 것인데, 서버시간을 표시할때 UNIX Timestamp이라는 정수형 int로 많이 저장한다.   
이는 1970년1월1일부터 몇초가 지났는지 기재하는 방식이다. int가 표현 할수 있는 범위는 - 2^31 ~ 2^31이다.     
이를 1970년1월1일부터 계산해보면 정수 오버플로우가 나타나는 시기는 2038년 1월 19일 3시 14분 7초이다. 이 후 오버플로우로인해
1901년 12월 13일이 되어버린다. 아마 64bit 타입 int로 바꾸던가 표기방식을 바꾸던가 해서 고쳐야할 것이다.
{: .prompt-tip }

위와 같이 데이터 모델을 설계하는것은 중요하다. 이는 공간 정보 역시 마찬가지로 2가지 일반적인 모델이 있다.

## 2. 공간 정보 모델
가령 아래의 그림과 같은 숲이 있다고 해보자, 일부는 소나무, 일부는 전나무, 일부는 참나무이다.   

![img.png](/assets/blog/database/spacial_database/data_model/img.png)

이를 그림이 아닌 모델로 표현하기 위해서는 아래와 같이 두 가지로 표현 할 수 있다.

### 1) 필드 기반
$$f(x,y) =$$   
$$소나무: 1\le x\le 3,  2 \le y \le 3$$   
$$전나무: 1\le x\le 2,  1 \le y \le 2$$    
$$참나무: 2\le x\le 3,  1 \le y \le 2$$

공간을 연속적인 값의 함수(예: 고도, 온도)로 보기 때문에 위와 같이 함수로 표현 가능하다.

### 2) 객체 기반

<table>
    <tr>
        <td>Area-ID</td>
        <td>Dominant Tree species</td>
        <td>Area/Boundary</td>
    </tr>
    <tr>
        <td>숲1</td>
        <td>소나무</td>
        <td>[(0,2),(4,2),(4,4),(0,4)]</td>
    </tr>
    <tr>
        <td>숲2</td>
        <td>전나무</td>
        <td>[(0,0),(2,0),(2,2),(0,2)]</td>
    </tr>
    <tr>
        <td>숲3</td>
        <td>참나무</td>
        <td>[(2,0),(4,0),(4,2),(2,2)]</td>
    </tr>
</table>

공간을 도로, 호수 같은 식별 가능한 객체들(점·선·면)로 보기때문에
위와 같이 3개의 Polygon을 가진 형태의 객체 형태로도 만들 수 있다.

### 3. 공간 객체 모델
사실 객체가 뭐냐고 물으면 정의가 매우 애매하나, 일단은 각각에 대해서 식별가능해야하고
속성을 가지고 있으며, 연산자가 포함되어있다는 점은 공통적인데 이러한 기준을 가지고 공간 객체를
정의한다면, 공간 객체는 공간적 속성을 가진 객체라고 할 수 있다.

이러한 객체는 아래와 같은 계층을 이루며 각각은 타입이다.

```scss
Geometry
 ├─ Point
 ├─ Curve (LineString)
 ├─ Surface (Polygon)
 ├─ Solid (3D)  ← ISO 19107에서 다룸(3D 지원)
 └─ GeometryCollection
      ├─ MultiPoint
      ├─ MultiCurve (MultiLineString)
      └─ MultiSurface (MultiPolygon)
```

Geometry: 공통 속성(좌표계, 차원)과 공통 연산(엔벨로프, SRID getter 등)을 가진다.
Point / Curve / Surface: 각각 0D, 1D, 2D(또는 3D) 원시(premitive). Simple Features는 주로 2D(꼭짓점은 선형 선분으로 보간) 중심으로 규정한다
Collections / Multi-*: 복수의 동일 타입(예: 여러 폴리곤)을 한 객체로 포장해 다루는 편의형.

이러한 공간 객체는 아래와 같은 속성을 가질 수 있다.
- 좌표와 SRID: 각 Geometry는 좌표를 갖고, 어떤 좌표계(SRID / CRS)에 정의되었는지 명시합니다. 서로 다른 SRID의 기하를 연산하려면 투영/변환이 필요하다.
- 차원성: 표준(특히 SFS)은 2D를 기본으로 하지만 Z(고도)나 M(측정값)을 포함하는 확장도 흔히 지원됩니다. ISO 19107은 3D(솔리드)도 다룬다.

또한 아래와 같은 연산을 가질 수 있다.

- 위상 술어(Topological predicates): Intersects, Contains, Within, Touches, Crosses, Disjoint 등 — 객체 간 위상 관계 판정.

- 거리/메트릭: Distance, ClosestPoint, Length, Area 등.

- 기하 연산(Constructive): Buffer, Union, Intersection, Difference, Simplify 등 — 새로운 Geometry를 생성.

- 기타: Envelope(MBR), Centroid, Boundary, IsValid(유효성 검사) 등

## 4. 위상 관계
위상 관계: 늘어나도(탄성 변형) 보존되는 관계(예: 접함).

Nine-Intersection 모델(내부·경계·외부의 9개 교차로 위상 관계를 표현) — 여러 위상 관계를 3×3 불행렬로 기술

## 5. ER-Diagram for Spacial information

> 추가 업데이트 및 검증 예정
{: .prompt-tip }


# 참고자료
- Shashi Shekhar and Sanjay Chawla, Spatial Databases: A Tour, Prentice Hall, 2003
- P. RIigaux, M. Scholl, and A. Voisard, SPATIAL DATABASES With Application to GIS, Morgan Kaufmann Publishers, 2002
- [INTERNATIONALSTANDARD-ISO19107 Geographic information — Spatialschema](https://cdn.standards.iteh.ai/samples/66175/92416c4eb8954655905aa1d18f244afc/ISO-19107-2019.pdf)
