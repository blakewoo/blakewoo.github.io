---
title: 컴파일러 - 구문 분석
author: blakewoo
date: 2025-8-19 23:00:00 +0900
categories: [Compiler]
tags: [Compiler, Parser] 
render_with_liquid: false
use_math: true
---

# 구문 분석
## 1. 개요
어휘 분석기에서는 입력 받은 토큰 스트림이 생성 가능한 것인지 판별했다.   
토큰 스트림이 생성 가능하다고 판별되면 이는 구문 분석기로 넘겨져 파스 트리(Parse tree)나
추상 구문트리(AST)를 생성하게 된다.

기본적으로 어휘분석기가 분리한 토큰을 가지고 트리를 생성하게 되는데
이러한 구문 분석을 위한 방법에는 크게 세 가지 방법이 있다.

## 2. 보편적(Universal) 구문 분석
Cocke-Younger-Kasami 알고리즘이나 Earley의 알고리즘과 같은 방법을 말하는데
이 방법은 어떠한 문법도 파싱할 수 있으며 이 방법은 너무 비효율적이라 사용 컴파일러에 사용되지 않는다.

## 3. 하향식(Top-down) 구문 분석
### 1) 재귀적 하강(Recursive-descent)
문법의 비단말(직접 사용되는 표현- ex: "if", "else")에 대해 하나의 함수를 작성하고 입력 토큰을 재귀 호출로 내려가며 문법 규칙을 구현하는
파서를 말한다. 구현에 직관적이고 디버깅이 쉽다.   
하지만 왼쪽 재귀를 직접 처리하기 어려우며 문법이 복잡해지면 파싱 속도가 느려질 수 있다. 혹은 특정 종류의 문법에 대해서는
무한 루프에 빠질 수 있다. 특히 좌 순환 문제의 경우에는 그런 문제가 생기는데 이럴때는 좌 순환 규칙을 변경해주거나
혹은 다른 파싱 법을 사용해주면 된다.

> 추가 업데이트 및 검증 예정
{: .prompt-tip }
> 
### 2) LL 계열
재귀 하향 파서의 단점을 보안하기 위해 고안된 파서이다.  


> 추가 업데이트 및 검증 예정
{: .prompt-tip }


## 4. 상향식(Bottom-up) 구문 분석
### 1) LR 계열

> 추가 업데이트 및 검증 예정
{: .prompt-tip }

## 5. 모호성 제거
어떤 문장에서 2개 이상의 파스트리를 생성하는 문법은 모호하다라고 표현한다.    
이러한 문법은 동일한 문장에 대해 2개 이상의 최 좌단 유도나 2개 이상의 최 우단 유도를 생성하는 문법이다.

> 추가 업데이트 및 검증 예정
{: .prompt-tip }

## 6. 오류 처리
### 1) 오류의 종류
#### a. 어휘 오류
식별자, 키워드, 연산자등의 철자 오류

#### b. 구문 오류
잘못 넣은 세미콜론이나 중괄호를 더 넣거나 빠뜨리는 경우   
혹은 C나 JAVA에서 포함되지 않은 case문이 나타나는 경우

#### c. 의미 오류
연산자와 피연산자들의 타입이 일치하지 않는 경우

#### d. 논리 오류
비교 연산자(==) 대신 대입 연산자(=)를 쓰는 경우 같이 논리적으로 문제가 발생할 경우

### 2) 오류 복구 기법
#### a. 공황 모드 복구
파서가 오류를 발견시 동기화 토큰(세미콜론, 중괄호)를 만날때까지 입력된 토큰들을 버리는 것이다.   
많은 양의 데이터를 오류 검사 하지 않지만 무한 루프에 따지지 않아서 빠르다.

ex)

```c
x = 3 / * 2 ;
```
위 코드에서 *에서 에러가 나면 ;를 만날때까지 입력 토큰 버림

#### b. 문구 수준 복구
오류 발견시 남아있는 입력에 대해서 부분적 교정을 수행하는 것이다.   
파서가 남아있는 입력 앞부분을 계속 수행이 가능 할 수 있게 하는 문자열로 대체하는 것인데, 가령 세미콜론을 빠뜨린 문제라던지
세미콜론 대신 다른 값으로 들어가있는걸 바꾼다던지하는 것이다.   
컴파일러 제작자에게 어디까지 고칠수 있게 할 것인가가 달려있는데, 개인적인 입장을 javascript외에 이렇게까지 극단적으로
수정되게 한 언어는 본적이 없는것 같다.   
물론 위와 같은 기능이 있다면 사용자에게 복구 정보를 쉽게 전달 가능하다. (가령, 여기 세미콜론이 없는 것 같습니다라던지)

#### c. 오류 생성 규칙
통상적인 오류가 발생할 것을 예상하면서 오류 구조를 생성하는 생성 규칙을 추가하는 것이다.   
아예 특정 케이스에 대해서 에러라고 못 박아두는 것이며, 이 경우 좀 더 정확한 정보를 전달 할 수 있지만
규칙이 많아 질 경우 문법이 지저분해진다.

#### d. 전역적 교정
개발하면서 에러가 났을때 가장 적게 수정하기를 바란다. 최소 비용의 편집을 찾아서 전달하면 가장 좋을 텐데
이는 시간이랑 공간 관점에서 비용이 너무 커서, 최적 대체 문자열을 찾아서 전달하는 방식으로 변경되었으며
많이 사용되고 있다.

> 추가 업데이트 및 검증 예정
{: .prompt-tip }
 
# 참고자료
- 컴파일러 : 원리, 기법, 도구 제 2판. ALFRED V. AHO, MONICA S. LAM, RAVI SETHI, JEFFREY D. ULLMAN. 우원희, 신승철, 우균, 하상호 옮김
- [위키 백과 - 파스 트리](https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%8A%A4_%ED%8A%B8%EB%A6%AC)
