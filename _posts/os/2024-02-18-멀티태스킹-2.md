---
title: 멀티태스킹 - 2
author: blakewoo
date: 2024-2-18 22:30:00 +0900
categories: [OS]
tags: [OS]
render_with_liquid: false
---

## 스케줄링
Task의 실행 순서를 정하는 것을 스케줄링이라고 한다.
가장 크게 나누면 두 개로 나눌 수 있다.
바로 선점형과 비선점형 스케줄링이다.

### 선점형 vs 비선점형
프로세스가 끝나기전에 다른 프로세스가 먼저 실행 할 수 있다면 선점형
현재 실행 중인 프로세스가 종료되기 전에 다른 프로세스가 먼저 실행될 수 없다면 비 선점형이다.
최근 상용 OS의 대부분은 선점형 OS이다.
왜냐하면 Timeslice를 두고 Task를 돌아가면서 실행하는 게 현재 상용 OS의 기본 방식이기 때문이다.
그게 아니라면 키보드나 마우스 이벤트와 같이 짧은 Deadline을 가지고 있는 인터럽트 루틴을 처리할 수가 없다.

아무튼 선점형과 비선점형 모두 스케줄링 방법이 여러가지 종류가 있는데, 그 중에 몇 가지만 알아보도록 하겠다.

### SJF(Shortest Job First) - 비선점형
Task가 실행 될 때 대기 시간이 짧으면 그 스케줄링 방법이 좋다고 볼수 있다. 아무래도 빨리 실행할 경우에
빨리 종료가 될 가능성이 높고, 응답시간도 짧아지기 때문일텐데. 짧은 Task 순으로 처리할 경우에
이러한 대기시간은 가장 짧다. 하지만 이런 방법은 비 선점형에서나 사용가능한 방법이고
선점형에서는 Task의 목록이 매번 바뀌기 때문에 사용하기 어렵고, 실제로 이 프로그램이 실행되는 시간이
짧을 것이냐를 예상하는게 힘들기 때문에 사용하기 어렵다.

### FCFS(First come first service) - 비선점형
Task가 입력된 순서대로 실행하는 방법이다. 어찌보면 굉장히 당연한 것으로 들리지만
이러한 Task의 Deadline이 있다면 이야기가 달라진다.
사람의 경우를 예로 들어보자. 어떤 직장인이 일 A와 일 B를 받았다.
A와 B 순서대로 받았지만 B는 오늘 당장 끝내야하는 일이고, A는 내일까지 끝내도 되는 일이다.
이런 경우에 A와 B 순으로 처리하게 되면 B의 데드라인이 넘어버릴 수 있다.
그러면 사실상 스케줄링 실패라고 볼 수 있다.
컴퓨터에서도 마찬가지다 급한 Task를 먼저 처리하지 못하면 이 역시 실패라고 볼 수 있는것이다.
가령 마우스 클릭이나 키보드 입력과 같은 급한 인터럽트 루틴이 조금 밀려도 되는 프로그램보다
늦게 실행되어버린다면 입력할때 버벅거리는 식의 문제가 발생하는 것이다.   
이러한 문제를 해결하기 위해 나온게 우선순위 큐라는 방식이다.

### 우선순위 큐 - 선점형
여러 개의 Task가 입력이 들어왔을 때 Task의 우선 순위를 부여하여 우선 순위가 높은 Task를
먼저 실행하는 것이다. Deadline이 중요한 서비스 같은 경우에는 아주 좋으나
우선 순위가 높은 Task가 계속 해서 추가될 경우 우선 순위가 낮은 Task의 순서가 계속 밀려서
계속 해서 실행이 되지 않을 수 있다.
이렇게 특정 Task가 실행되지 않는 것을 기아(Starvation)이라고 말한다.
우선 순위를 생각하자니 기아가 발생하고 FCFS를 쓰자니 응답 시간이 느리고
각각 여러모로 문제가 있으니 이 둘을 합쳐서 나온 스케줄링 방식이 있다.

### 멀티 레벨 큐 - 선점형
멀티 레벨 큐는 기본적으로 우선 순위 큐와 비슷하지만 아무리 우선 순위가 낮은 Task라도
결국에 한번은 실행을 하게 되는 방법이다.
기본적으로 Task에 우선 순위는 있다. 하지만 우선 순위가 낮은 Task가 뒤로 밀릴때마다
특정 가중치를 둬서 우선 순위를 올리는 방식이다.
이렇게 되면 우선 순위 순서대로 Task가 실행되지만 계속해서 실행순서가 밀린 Task도
지속적으로 우선 순위가 올라가기 때문에 결국 한번은 실행되게 된다.



# 참고 문헌
1. 64Bit 멀티코어 OS의 구조 - 한승훈 저

# 업데이트
- 20240222 : 스케줄링 기법 업데이트
